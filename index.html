<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <title>IDTè¨ˆç®—(2000mTT&20minTT)</title>
    <style>    
    :root{
      --bg-light: #f9f9f9;
      --bg-dark: #171717;
      --fg-light: #333333;
      --fg-dark: #e0e0e0;
      --link-light: #0066cc;
      --link-dark: #88bbff;
      --bg: var(--bg-light);
      --fg: var(--fg-light);
      --link: var(--link-light);
      --border-light: rgba(0,0,0,0.12);
      --border-dark: rgba(255,255,255,0.12);
      --button-bg-light: #f0f0f0;
      --button-bg-dark: #2a2a2a;
      --button-fg-light: #333333;
      --button-fg-dark: #d0d0d0;
      --radio-color-light: #333333;
      --radio-color-dark: #888888;
    }
    body[data-theme="dark"]{
      --bg: var(--bg-dark);
      --fg: var(--fg-dark);
      --link: var(--link-dark);
      --button-bg: var(--button-bg-dark);
      --button-fg: var(--button-fg-dark);
      --radio-color: var(--radio-color-dark);
    }
    
    body[data-theme="light"]{
      --bg: var(--bg-light);
      --fg: var(--fg-light);
      --link: var(--link-light);
      --button-bg: var(--button-bg-light);
      --button-fg: var(--button-fg-light);
      --radio-color: var(--radio-color-light);
    }

    body {
      font-family: sans-serif;
      margin: 1em;
      background: var(--bg);
      color: var(--fg);
    }
      h1, h2 {
        text-align: center;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1em;
        margin-bottom: 1em;
      }
      th, td {
        border: 1px solid var(--border-light);
        padding: 0.4em;
        text-align: center;
        font-size: 0.9em;
      }
      body[data-theme="dark"] th, body[data-theme="dark"] td {
        border-color: var(--border-dark);
      }
      input {
        width: 90%;
        padding: 0.3em;
        font-size: 0.9em;
        background: transparent;
        color: var(--fg);
        border: 1px solid rgba(0,0,0,0.08);
        border-color: var(--border-light);
      }
      button {
        margin: 0.5em 0;
        padding: 0.5em 1.5em;
        font-size: 0.9em;
        background: var(--button-bg);
        color: var(--button-fg);
        border: 1px solid rgba(0,0,0,0.1);
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      button:hover {
        opacity: 0.9;
        transform: translateY(-1px);
      }
      .result {
        font-weight: bold;
      }
      .red {
          color :red;
          font-size :20px;
          font-family :"Arial";
      }
      .m-r {
        background-color: #fff59d;  
        padding: 0.1em 0.2em;       
        border-radius: 2px; 
      }
      a {
        color: var(--link);
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }
      #themeToggle {
        position: fixed;
        right: 12px;
        top: 12px;
        width: 44px;
        height: 44px;
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        border: none;
        background: rgba(0,0,0,0.06);
        color: var(--fg);
        cursor: pointer;
        font-size: 18px;
        z-index: 1000;
      }
      body[data-theme="dark"] #themeToggle {
        background: rgba(255,255,255,0.08);
      }

      body[data-theme="dark"] input {
        border-color: var(--border-dark);
      }
      input[type="radio"] {
        width: auto;
        accent-color: var(--radio-color);
        margin-right: 4px;
      }
      input[type="radio"] + label {
        color: var(--fg);
        margin-right: 8px;
      }
      .result:contains("å…¥åŠ›ã‚¨ãƒ©ãƒ¼") {
        color: #ff6b6b;
      }
      body[data-theme="dark"] .red {
        color: #ff8080;
      }
    </style>
</head>
<body>
  <h1>IDTè¨ˆç®—ãƒ„ãƒ¼ãƒ«</h1>
  <h2>2000mTTç”¨IDTè¨ˆç®—</h2>
  <table id="dataTable2k">
    <thead>
      <tr>
        <th>ã‚¿ã‚¤ãƒ (ä¾‹:7:42.6)</th>
        <th>ä½“é‡(kg)</th>
        <th>æ€§åˆ¥</th>
        <th>IDT(%)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><input type="text" placeholder="mm:ss.s"></td>
        <td><input type="number" placeholder="60"></td>
        <td>
          <input type="radio" name="gender1" value="0" checked> ç”·æ€§<p>
          <input type="radio" name="gender1" value="1"> å¥³æ€§
        </td>
        <td class="result"></td>
      </tr>
    </tbody>
  </table>
  <button onclick="calcAll2k()">è¨ˆç®—</button>
    <hr>
  <h2>20åˆ†TTç”¨IDTè¨ˆç®—</h2>
  <table id="dataTable20">
    <thead>
      <tr>
        <th>20åˆ†å¹³å‡ãƒšãƒ¼ã‚¹(ä¾‹:2:05.3)</th>
        <th>ä½“é‡(kg)</th>
        <th>æ€§åˆ¥</th>
        <th>IDT(%)</th>
      </tr>
    </thead>
    <tbody>
    <tr>
      <td><input type="text" placeholder="mm:ss.s"></td>
      <td><input type="number" placeholder="60"></td>
      <td>
        <input type="radio" name="gender0" value="0" checked> ç”·æ€§<p>
        <input type="radio" name="gender0" value="1"> å¥³æ€§
      </td>
      <td class="result"></td>
    </tr>
  </tbody>
  </table>
  <button onclick="calcAll20()">è¨ˆç®—</button>
     <h5>20åˆ†TTã®è¨ˆç®—çµæœã®IDTã¯ã‚ãã¾ã§ã‚‚ç›®å®‰ã§ã™ã€‚</h5>
  <hr>
    å…¥åŠ›ã¯<span class="red">åŠè§’æ•°å­—</span>ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚<br>
    å…¨è§’æ•°å­—(ï¼’ï¼šï¼ï¼•ï¼ï¼“)ãªã©ã¨å…¥åŠ›ã—ãªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„ã€‚<br>
    å…¥åŠ›å½¢å¼ãŒé–“é•ã£ã¦ã„ã‚‹ã¨è¨ˆç®—ã§ãã¾ã›ã‚“ã€‚<br><br>

    IDTã®è¨ˆç®—ã¯<a href= "https://marine.isee.nagoya-u.ac.jp/labhp/member/aiki/idte.html" >åå¤å±‹å¤§å­¦</a>ã®è¨ˆç®—å¼ã‚’ç”¨ã„ã¦è¨ˆç®—ã—ã¦ã„ã¾ã™ã€‚<br><br>
    20åˆ†TTç”¨ã®è¨ˆç®—ã§ã¯ã€å¹³å‡500mãƒšãƒ¼ã‚¹ã«è£œæ­£ä¿‚æ•°ï¼ˆ0.94ï¼‰ã‚’é©ç”¨ã—ã€2000mTTã«ç›¸å½“ã™ã‚‹æ¨å®šå€¤ã‚’ç®—å‡ºã—ã¦ã„ã¾ã™ã€‚

<hr>
  <p><span class="min">&copy; 2025 KTHS RC</span></p>
  <p class="min">Based on IDT concept (Nagoya Univ.) with original adjustments for 20min TT</p>

    
  <script>
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
    window.splitToSeconds = function(split) {
      if (!split || typeof split !== "string") return NaN;
      const parts = split.split(":");
      if (parts.length !== 2) return NaN;
      const min = parseFloat(parts[0]);
      const sec = parseFloat(parts[1]);
      if (isNaN(min) || isNaN(sec)) return NaN;
      return min * 60 + sec;
    };
      
    window.rowCounter = 0;
      
    document.addEventListener("DOMContentLoaded", function() {
      window.addRow20 = function() {
        const tbody = document.querySelector("#dataTable20 tbody");
        if (!tbody) return;
        const tr = document.createElement("tr");
        const name = `gender20_${++window.rowCounter}`;
        tr.innerHTML = `
          <td><input type="text" placeholder="mm:ss.s"></td>
          <td><input type="number" placeholder="60"></td>
          <td>
            <label><input type="radio" name="${name}" value="0" checked> ç”·æ€§</label>
            <label><input type="radio" name="${name}" value="1"> å¥³æ€§</label>
          </td>
          <td class="result"></td>
        `;
        tbody.appendChild(tr);
      };

      window.addRow2k = function() {
        const tbody = document.querySelector("#dataTable2k tbody");
        if (!tbody) return;
        const tr = document.createElement("tr");
        const name = `gender2k_${++window.rowCounter}`;
        tr.innerHTML = `
          <td><input type="text" placeholder="mm:ss.s"></td>
          <td><input type="number" placeholder="60"></td>
          <td>
            <label><input type="radio" name="${name}" value="0" checked> ç”·æ€§</label>
            <label><input type="radio" name="${name}" value="1"> å¥³æ€§</label>
          </td>
          <td class="result"></td>
        `;
        tbody.appendChild(tr);
      };

      // è¨ˆç®—
      window.calcAll20 = function() {
        document.querySelectorAll("#dataTable20 tbody tr").forEach(tr => {
          const splitInput = tr.children[0].querySelector("input").value.trim();
          const weight = parseFloat(tr.children[1].querySelector("input").value);
          const genderInput = tr.children[2].querySelector('input[type="radio"]:checked');
          const gender = genderInput ? parseFloat(genderInput.value) : NaN;

          if (splitInput && !isNaN(weight) && !isNaN(gender)) {
            const splitSec = window.splitToSeconds(splitInput);
            if (!isNaN(splitSec)) {
              const ergo = splitSec * 4 * 0.94; // è£œæ­£ä¿‚æ•°
              const idtm = ((101.0 - weight) * (20.9/23.0) + 333.07) / ergo * 100.0;
              const idtw = ((100.0 - weight) * 1.40 + 357.80) / ergo * 100.0;
              const score = idtm * (1.0 - gender) + idtw * gender;
              tr.querySelector(".result").textContent = score.toFixed(1) + "%";
            } else {
              tr.querySelector(".result").textContent = "å…¥åŠ›ã‚¨ãƒ©ãƒ¼";
            }
          } else {
            tr.querySelector(".result").textContent = "";
          }
        });
      };

      window.calcAll2k = function() {
        document.querySelectorAll("#dataTable2k tbody tr").forEach(tr => {
          const time2kInput = tr.children[0].querySelector("input").value.trim();
          const weight = parseFloat(tr.children[1].querySelector("input").value);
          const genderInput = tr.children[2].querySelector('input[type="radio"]:checked');
          const gender = genderInput ? parseFloat(genderInput.value) : NaN;

          if (time2kInput && !isNaN(weight) && !isNaN(gender)) {
            const ergo = window.splitToSeconds(time2kInput);
            if (!isNaN(ergo) && ergo > 0) {
              const idtm = ((101.0 - weight) * (20.9/23.0) + 333.07) / ergo * 100.0;
              const idtw = ((100.0 - weight) * 1.40 + 357.80) / ergo * 100.0;
              const score = idtm * (1.0 - gender) + idtw * gender;
              tr.querySelector(".result").textContent = score.toFixed(1) + "%";
            } else {
              tr.querySelector(".result").textContent = "å…¥åŠ›ã‚¨ãƒ©ãƒ¼";
            }
          } else {
            tr.querySelector(".result").textContent = "";
          }
        });
      };

      const btn = document.createElement('button');
      btn.id = 'themeToggle';
      btn.type = 'button';
      btn.title = 'ã‚«ãƒ©ãƒ¼åˆ‡æ›¿';
      document.body.appendChild(btn);

      const stored = localStorage.getItem('idt_theme');
      const mql = window.matchMedia ? window.matchMedia('(prefers-color-scheme: dark)') : null;
      const prefersDark = mql ? mql.matches : false;
      const initial = stored || (prefersDark ? 'dark' : 'light');

      function applyTheme(t) {
        document.body.setAttribute('data-theme', t);
        btn.textContent = t === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
        try { localStorage.setItem('idt_theme', t); } catch(e){}
      }

      applyTheme(initial);

      btn.addEventListener('click', function(){
        const current = document.body.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
        applyTheme(current === 'dark' ? 'light' : 'dark');
      });

      if (!stored && mql) {
        const handler = e => applyTheme(e.matches ? 'dark' : 'light');
        if (typeof mql.addEventListener === 'function') {
          mql.addEventListener('change', handler);
        } else if (typeof mql.addListener === 'function') {
          mql.addListener(handler);
        }
      }
    });
  </script>
</body>
</html>
